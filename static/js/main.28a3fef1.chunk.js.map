{"version":3,"sources":["components/Layout/index.jsx","components/TextInput/index.jsx","components/Button/index.jsx","components/FileInput/index.jsx","components/RadioGroup/index.jsx","components/Loader.jsx","routes/Home/index.jsx","routes/Error/index.jsx","App.jsx","index.jsx"],"names":["Layout","title","children","className","TextInput","onChange","hint","type","placeholder","Button","onClick","cssClass","role","FileInput","id","htmlFor","RadioGroup","data","state","map","item","name","value","defaultChecked","Loader","size","color","xmlns","width","height","viewBox","preserveAspectRatio","cx","cy","fill","stroke","strokeWidth","r","strokeDasharray","transform","attributeName","calcMode","values","keyTimes","dur","begin","repeatCount","Home","document","useState","file","setFile","uploading","setUploading","uploaded","setUploaded","ready","setReady","error","setError","engines","url","engine","setEngine","videoTypes","upload","headers","Headers","append","formdata","FormData","fetch","method","body","then","response","json","success","Error","link","search","catch","fileUrl","window","open","focus","dataURLtoFile","dataurl","arr","split","mime","match","bstr","atob","n","length","u8arr","Uint8Array","charCodeAt","File","target","selectedFile","files","find","i","filter","videoUrl","URL","createObjectURL","thumbnailHandler","snapshotAtTime","renderThumbnail","NotFound","to","App","path","exact","component","status","ReactDOM","render","StrictMode","querySelector"],"mappings":"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","file":"static/js/main.28a3fef1.chunk.js","sourcesContent":["import './style.css';\r\n\r\nconst Layout = ({ title, children }) => {\r\n  return (\r\n    <div className=\"layout\">\r\n      {title && <h2 className=\"layout_title\">{title}</h2>}\r\n      <div>\r\n        {children}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Layout;\r\n","import './style.css';\r\n\r\nconst TextInput = ({ onChange, hint }) => {\r\n  return (\r\n    <input type=\"text\" onChange={onChange} className=\"text_input\" placeholder={hint || 'Type something...'} />\r\n  )\r\n}\r\n\r\nexport default TextInput;\r\n","import './style.css';\r\n\r\nconst Button = ({ className, onClick, children }) => {\r\n  const cssClass = className ? ` ${className}` : ' main'\r\n\r\n  const click = () => {\r\n    onClick && onClick()\r\n  }\r\n\r\n  return (\r\n    <div onClick={click} className={'btn' + cssClass} role=\"button\">\r\n      {children || 'Click'}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Button;\r\n","import { Fragment } from 'react';\r\nimport Button from 'components/Button';\r\nimport './style.css';\r\n\r\nconst FileInput = ({ onChange, children }) => {\r\n  return (\r\n    <Fragment>\r\n      <input id=\"fileInput\" type=\"file\" onChange={onChange} className=\"none\" />\r\n      <label htmlFor=\"fileInput\" className=\"file_input\" title=\"Upload file\">\r\n        <Button>Choose</Button>\r\n        <span>\r\n          {children || 'File not selected'}\r\n        </span>\r\n      </label>\r\n    </Fragment>\r\n  )\r\n}\r\n\r\nexport default FileInput;\r\n","import './style.css';\r\n\r\nconst RadioGroup = ({ data, state, onChange }) => {\r\n  return (\r\n    <form onChange={onChange} className=\"radio_group\">\r\n      {data.map(item => (\r\n        <div className=\"radio_item\" key={item.id}>\r\n          <input id={'engine_' + item.id} type=\"radio\" name=\"engine\" value={item.id} defaultChecked={state.id === item.id} />\r\n          <label htmlFor={'engine_' + item.id}>{item.name}</label>\r\n        </div>\r\n      ))}\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default RadioGroup;\r\n","const Loader = ({ size = '24', color = '#fff' }) => {\r\n  return (\r\n    <div className=\"loader\">\r\n      <svg xmlns=\"http://www.w3.org/2000/svg\" width={size} height={size} viewBox=\"0 0 100 100\" preserveAspectRatio=\"xMidYMid\">\r\n        <circle cx=\"50\" cy=\"50\" fill=\"none\" stroke={color} strokeWidth=\"10\" r=\"35\" strokeDasharray=\"164.93361431346415 56.97787143782138\" transform=\"rotate(359.289 50.0009 50.0009)\">\r\n          <animateTransform attributeName=\"transform\" type=\"rotate\" calcMode=\"linear\" values=\"0 50 50;360 50 50\" keyTimes=\"0;1\" dur=\"1.2s\" begin=\"0s\" repeatCount=\"indefinite\" />\r\n        </circle>\r\n      </svg>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Loader;\r\n","import { useState } from 'react';\r\nimport Layout from 'components/Layout';\r\nimport TextInput from 'components/TextInput';\r\nimport FileInput from 'components/FileInput';\r\nimport RadioGroup from 'components/RadioGroup';\r\nimport Button from 'components/Button';\r\nimport Loader from 'components/Loader';\r\n\r\nimport { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\r\nimport VideoThumbnail from 'react-video-thumbnail';\r\n\r\nconst Home = () => {\r\n  document.title = 'Image search'\r\n\r\n  const [file, setFile] = useState(null)\r\n  const [uploading, setUploading] = useState(false)\r\n  const [uploaded, setUploaded] = useState('')\r\n  const [ready, setReady] = useState(false)\r\n  const [error, setError] = useState('')\r\n\r\n  const engines = [{\r\n    id: 1,\r\n    name: 'Google',\r\n    url: 'https://www.google.com/searchbyimage?image_url='\r\n  }, {\r\n    id: 2,\r\n    name: 'Yandex',\r\n    url: 'https://yandex.com/images/search?rpt=imageview&url='\r\n  }]\r\n  const [engine, setEngine] = useState(engines[0])\r\n\r\n  const apiUrl = 'https://api.imgur.com/3/image'\r\n  const clientId = 'f1f9224726db6dd'\r\n\r\n  const videoTypes = ['video/mp4', 'video/webm']\r\n\r\n  const chooseHandler = ({ target }) => {\r\n    error && setError('')\r\n    uploaded && setUploaded('')\r\n\r\n    const selectedFile = target.files?.item(0)\r\n\r\n    if (videoTypes.find(i => i === selectedFile.type)) {\r\n      ready && setReady(false)\r\n    } else {\r\n      setReady(true)\r\n    }\r\n\r\n    setFile(selectedFile)\r\n  }\r\n\r\n  const linkHandler = ({ target }) => {\r\n    error && setError('')\r\n    uploaded && setUploaded('')\r\n    target.value.length > 0 ? setReady(true) : setReady(false)\r\n\r\n    setUploaded(target.value)\r\n  }\r\n\r\n  const engineHandler = ({ target }) => {\r\n    setEngine(engines.filter(i => i.id === target.value * 1 )[0])\r\n  }\r\n\r\n  const uploadClick = () => {\r\n    if (file) {\r\n      setUploading(true)\r\n      upload(file)\r\n    } else {\r\n      setUploading(false)\r\n      setError('Select a file!')\r\n    }\r\n  }\r\n\r\n  const upload = (file) => {\r\n    const headers = new Headers()\r\n    headers.append('Authorization', 'Client-ID ' + clientId)\r\n\r\n    const formdata = new FormData()\r\n    formdata.append('image', file)\r\n\r\n    const options = {\r\n      method: 'POST',\r\n      headers,\r\n      body: formdata\r\n    }\r\n\r\n    fetch(apiUrl, options)\r\n      .then(response => response.json())\r\n      .then(({ data, success }) => {\r\n        if (!success) throw Error\r\n\r\n        setUploading(false)\r\n        setUploaded(data.link)\r\n\r\n        search(data.link)\r\n      })\r\n      .catch(error => {\r\n        setError('Error. File not uploaded')\r\n        setUploading(false)\r\n        setUploaded('')\r\n        setFile(null)\r\n      })\r\n  }\r\n\r\n  const searchClick = () => {\r\n    search(uploaded)\r\n  }\r\n\r\n  const search = (fileUrl) => {\r\n    const win = window.open(engine.url + fileUrl, '_blank')\r\n    win.focus()\r\n  }\r\n\r\n  const thumbnailHandler = (data) => {\r\n    setReady(true)\r\n    setFile(dataURLtoFile(data))\r\n  }\r\n\r\n  const dataURLtoFile = (dataurl) => {\r\n    const arr = dataurl.split(',')\r\n    const mime = arr[0].match(/:(.*?);/)[1]\r\n    const bstr = atob(arr[1])\r\n    let n = bstr.length \r\n    const u8arr = new Uint8Array(n)\r\n\r\n    while (n--) {\r\n      u8arr[n] = bstr.charCodeAt(n)\r\n    }\r\n\r\n    return new File([u8arr], 'image.' + mime.split('/')[1], { type: mime })\r\n  }\r\n\r\n  return (\r\n    <Layout title=\"Search by image or video\">\r\n      <Tabs>\r\n        <TabList>\r\n          <Tab>Upload file</Tab>\r\n          <Tab>Paste link</Tab>\r\n        </TabList>\r\n\r\n        <TabPanel>\r\n          <FileInput onChange={chooseHandler}>\r\n            {!error\r\n              ? file ? file.name : 'Select image or video'\r\n              : error\r\n            }\r\n          </FileInput>\r\n        </TabPanel>\r\n\r\n        <TabPanel>\r\n          <TextInput onChange={linkHandler} hint={'Paste link to image'} />\r\n        </TabPanel>\r\n      </Tabs>\r\n\r\n      <RadioGroup data={engines} state={engine} onChange={engineHandler} />\r\n\r\n      {!uploaded\r\n        ? <Button className={!ready && 'main disable'} onClick={uploadClick}>{uploading ? <Loader /> : 'Upload and find'}</Button>\r\n        : <Button className={!ready && 'main disable'} onClick={searchClick}>Find</Button>\r\n      }\r\n\r\n      {file && videoTypes.find(i => i === file.type) && (\r\n        <VideoThumbnail\r\n          videoUrl={URL.createObjectURL(file)}\r\n          thumbnailHandler={thumbnailHandler}\r\n          snapshotAtTime={2}\r\n          renderThumbnail={false}\r\n        />\r\n      )}\r\n    </Layout>\r\n  )\r\n}\r\n\r\nexport default Home;\r\n","import { Link } from 'react-router-dom';\r\n\r\nexport const NotFound = () => {\r\n  document.title = '404 Not Found'\r\n\r\n  return (\r\n    <div>\r\n      <h2>404 Not Found</h2>\r\n      <div>\r\n        <Link to=\"/\">Go home</Link>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\nimport Home from 'routes/Home';\nimport { NotFound } from 'routes/Error';\n\nconst App = () => {\n  return (\n    <Router>\n      <Switch>\n        <Route path=\"/Image-Search\" exact component={Home} />\n        <Route component={NotFound} status={404} />\n      </Switch>\n    </Router>\n  )\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'index.css';\nimport App from 'App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.querySelector('#root')\n);\n"],"sourceRoot":""}